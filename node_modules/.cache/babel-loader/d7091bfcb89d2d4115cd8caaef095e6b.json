{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Andreea\\\\Desktop\\\\IP\\\\Aplicatie Web\\\\src\\\\pages\\\\doctor\\\\PacientiDoctor.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nfunction PacientiDoctor() {\n  const doctorEmail = localStorage.getItem('email');\n  const [pacienti, setPacienti] = useState([]);\n  const [mesaj, setMesaj] = useState('');\n  useEffect(() => {\n    const fetchPacienti = async () => {\n      try {\n        const res = await axios.get('http://localhost:4000/api/doctor/pacienti', {\n          params: {\n            doctorEmail\n          }\n        });\n        setPacienti(res.data);\n      } catch (err) {\n        var _err$response, _err$response$data;\n        setMesaj('Eroare la încărcare: ' + (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || err.message));\n      }\n    };\n    fetchPacienti();\n  }, [doctorEmail]);\n  const handleSterge = async id => {\n    if (!window.confirm('Sigur vrei să ștergi acest pacient?')) return;\n    try {\n      await axios.delete(`http://localhost:4000/api/doctor/pacient/${id}`);\n      setPacienti(pacienti.filter(p => p.PacientID !== id));\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setMesaj('Eroare la ștergere: ' + (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.error) || err.message));\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      maxWidth: 900,\n      margin: '2rem auto'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }, \"Pacien\\u021Bii mei\"), mesaj && /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      color: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 17\n    }\n  }, mesaj), /*#__PURE__*/React.createElement(\"table\", {\n    border: \"1\",\n    cellPadding: 6,\n    style: {\n      width: '100%',\n      marginBottom: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }, \"Nume\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }\n  }, \"Prenume\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }\n  }, \"Email\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }\n  }, \"Ac\\u021Biuni\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, pacienti.map(p => /*#__PURE__*/React.createElement(\"tr\", {\n    key: p.PacientID,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 15\n    }\n  }, p.Nume), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 15\n    }\n  }, p.Prenume), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 15\n    }\n  }, p.Email), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/doctor/pacient/${p.PacientID}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, \"Vizualizeaz\\u0103\"), \" |\", ' ', /*#__PURE__*/React.createElement(Link, {\n    to: `/doctor/pacient/${p.PacientID}/edit`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 17\n    }\n  }, \"Modific\\u0103\"), \" |\", ' ', /*#__PURE__*/React.createElement(\"button\", {\n    onClick: () => handleSterge(p.PacientID),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }\n  }, \"\\u0218terge\")))))));\n}\nexport default PacientiDoctor;","map":{"version":3,"names":["React","useEffect","useState","axios","Link","PacientiDoctor","doctorEmail","localStorage","getItem","pacienti","setPacienti","mesaj","setMesaj","fetchPacienti","res","get","params","data","err","_err$response","_err$response$data","response","error","message","handleSterge","id","window","confirm","delete","filter","p","PacientID","_err$response2","_err$response2$data","createElement","style","maxWidth","margin","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","color","border","cellPadding","width","marginBottom","map","key","Nume","Prenume","Email","to","onClick"],"sources":["C:/Users/Andreea/Desktop/IP/Aplicatie Web/src/pages/doctor/PacientiDoctor.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction PacientiDoctor() {\r\n  const doctorEmail = localStorage.getItem('email');\r\n  const [pacienti, setPacienti] = useState([]);\r\n  const [mesaj, setMesaj] = useState('');\r\n\r\n  useEffect(() => {\r\n    const fetchPacienti = async () => {\r\n      try {\r\n        const res = await axios.get('http://localhost:4000/api/doctor/pacienti', {\r\n          params: { doctorEmail }\r\n        });\r\n        setPacienti(res.data);\r\n      } catch (err) {\r\n        setMesaj('Eroare la încărcare: ' + (err.response?.data?.error || err.message));\r\n      }\r\n    };\r\n    fetchPacienti();\r\n  }, [doctorEmail]);\r\n\r\n  const handleSterge = async (id) => {\r\n    if (!window.confirm('Sigur vrei să ștergi acest pacient?')) return;\r\n    try {\r\n      await axios.delete(`http://localhost:4000/api/doctor/pacient/${id}`);\r\n      setPacienti(pacienti.filter(p => p.PacientID !== id));\r\n    } catch (err) {\r\n      setMesaj('Eroare la ștergere: ' + (err.response?.data?.error || err.message));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ maxWidth: 900, margin: '2rem auto' }}>\r\n      <h2>Pacienții mei</h2>\r\n      {mesaj && <div style={{ color: 'red' }}>{mesaj}</div>}\r\n      <table border=\"1\" cellPadding={6} style={{ width: '100%', marginBottom: 20 }}>\r\n        <thead>\r\n          <tr>\r\n            <th>Nume</th>\r\n            <th>Prenume</th>\r\n            <th>Email</th>\r\n            <th>Acțiuni</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {pacienti.map(p => (\r\n            <tr key={p.PacientID}>\r\n              <td>{p.Nume}</td>\r\n              <td>{p.Prenume}</td>\r\n              <td>{p.Email}</td>\r\n              <td>\r\n                <Link to={`/doctor/pacient/${p.PacientID}`}>Vizualizează</Link> |{' '}\r\n                <Link to={`/doctor/pacient/${p.PacientID}/edit`}>Modifică</Link> |{' '}\r\n                <button onClick={() => handleSterge(p.PacientID)}>Șterge</button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PacientiDoctor;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}